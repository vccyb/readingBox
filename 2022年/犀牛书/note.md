# JavaScript æƒå¨æŒ‡å— ç¬¬ä¸ƒç‰ˆ





è¯‘è€…ï¼šææ¾å³°

æ€»å…±æœ‰17ç« 

- å‰8ç« å±äºJSåŸºç¡€ï¼Œä»‹ç»äº†å¾ˆå¤šçš„æœ€åŸºæœ¬ï¼Œæœ€å¸¸ç”¨çš„è¯­æ³•ï¼Œç‰¹æ€§
- 9ï½14ç« å±äºJSè¿›é˜¶ï¼Œä»‹ç»äº†ï¼Œç±»ã€å…ƒç¼–ç¨‹ã€å¼‚æ­¥ï¼Œè¿­ä»£å™¨ç”Ÿæˆå™¨ã€æ ‡å‡†åº“ç­‰
- 15ï½17ç« å±äºJSæ‰©å±•ç›¸å…³ï¼Œä»‹ç»äº†æµè§ˆå™¨çš„JSã€Nodeçš„JSï¼Œä»¥åŠä¸€äº›å·¥å…·ã€‚



æ—¶é—´æœ‰é™ï¼Œæ²¡æœ‰åŠæ³•è¿›è¡Œå…¨é¢çš„ç¬”è®°ï¼Œå¯¹äºä¹‹å‰å°±äº†è§£çš„å†…å®¹ï¼Œç®€å•ç•¥è¿‡ï¼Œç€é‡è®°å½•ä¸€äº›ä¹‹å‰æ²¡å‘ç°çš„ç‰¹æ€§ï¼Œä»¥åŠä¸€äº›ä¼˜ç§€å®è·µï¼Œå·¥å…·ã€apiç­‰ã€‚







# 1 ç®€ä»‹



ç•¥



# 2 è¯æ³•ç»“æ„



## 1ã€åˆ†å·

JSä¸­åˆ†å·æ˜¯ç”¨æ¥åˆ†éš”è¯­å¥çš„ã€‚è¿™å…¶å®æ˜¯ä¸€ç§é£æ ¼ï¼Œä¸åŠ åˆ†å·ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å½“ä½ ç¢°åˆ°ä¸€äº›ç‰¹æ®Šçš„caseçš„æ—¶å€™ï¼Œè¦æ³¨æ„è¯†åˆ«ã€‚

egï¼š

```js
let m = n + f
(b+c).toString()
```

ä¸Šè¿°ä»£ç ï¼Œä¼šè¢«è§£æä¸º

```js
let m = n + f(a+b).toString();

// bugäº†å§ è§£å†³å¯ä»¥, ä½†æ˜¯æ˜¯ä¸æ˜¯çœ‹ä¸Šå»å¾ˆæ€ª
let m = n + f
;(b+c).toString()
```

å®é™…ä¸Šï¼Œç°ä»£çš„å¼€å‘ï¼Œå¾€å¾€ä¼šä½¿ç”¨ä¸€äº›å·¥å…·æ¥è§„èŒƒï¼Œæ¯”å¦‚eslintï¼Œè¿™æ ·ä»–ä¼šè‡ªåŠ¨ç»™ä½ è§„èŒƒåŒ–ï¼ŒæŒ‰ç…§ä»–çš„è¦æ±‚ï¼Œä¸ä¼šå‡ºç°ä¸Šä¸Šè¿°é—®é¢˜çš„ã€‚

å€¼å¾—ä¸€æçš„æ˜¯ï¼Œvueçš„å¼€å‘è€…ï¼Œå°¤å¤§æ˜¯ä¸€ä¸ªä¸å†™åˆ†å·å…šğŸ˜Šã€‚

![image-20230325223730164](/Users/chenyubo/Library/Application Support/typora-user-images/image-20230325223730164.png)

æ€»ç»“ï¼šç”¨å¥½å·¥å…·ï¼ŒæŒ‰ç…§å›¢é˜Ÿçš„è§„èŒƒæ¥èµ°ï¼Œåˆ†å·åªæ˜¯ä¸€ç§é£æ ¼ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¤æ‚é—®é¢˜ã€‚



# 3 ç±»å‹ã€å€¼å’Œå˜é‡

## 1ã€æ•°å€¼å­—é¢é‡çš„åˆ†éš”ç¬¦å·

 ```js
let billion = 1_000_000_000 // 10äº¿
 ```

åœ¨å¼€å‘ä¸­ï¼Œè¿˜æ˜¯ç»å¸¸æœ‰è¿™ç§ç±»å‹çš„ï¼Œæœ‰æ—¶å€™ä¼šå®šä¹‰å¸¸é‡å»



## 2ã€ç®—æ•°ï¼š

JSä¸­ç®—æ•°é‡åˆ°ä¸Šæº¢å‡ºã€ä¸‹æº¢å‡ºã€è¢«é™¤é›¶æ—¶å€™ä¸ä¼šå‘ç”Ÿé”™è¯¯ã€‚ç»“æœæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ— ç©·å€¼ `Infinity`

æµ®ç‚¹æ•°çš„ç²¾åº¦é—®é¢˜ï¼Œåœ¨å¼€å‘ä¸­å¯ä»¥çš„è¯å°½é‡è½¬åŒ–ä¸ºç­‰é‡çš„æ­£æ•°å»ä½¿ç”¨ã€‚



## 3ã€å­—ç¬¦ä¸²

å­—ç¬¦ä¸²çš„ä¸€äº›apiï¼Œåœ¨å¼€å‘ä¸­ï¼Œå‘ç°æœ‰äººç‰¹åˆ«å–œæ¬¢indexOfï¼Œå…¶å®è¿˜æ˜¯æœ‰ä¸€äº›å¥½ç”¨çš„apiä¸æ˜¯

```js
s.includes("or")  // åˆ¤æ–­æ˜¯å¦åŒ…å«å­—ä¸² or

s.trim() // å»æ‰ä¸¤éçš„ç©ºå­—ç¬¦

s.split(",")   // ä»å®šç•Œç¬¦æ‹†å¼€
```



## 4ã€ç¬¦å·

å¼€å‘ä¸­æš‚æ—¶å¥½åƒå¾ˆå°‘ä½¿ç”¨åˆ°symbolã€‚

symbolçš„ä¸»è¦ä½œç”¨å°±æ˜¯ä½œä¸ºå¯¹è±¡çš„å±æ€§å

Symbol () æ°¸è¿œä¸ä¼šè¿”å›ç›¸åŒçš„å€¼

è€ŒSymbol.for() æ ¹æ®å…¥å‚è¿”å›çš„ï¼Œå¦‚æœæœ‰äº†ï¼Œä»–å°±ä¼šè¿”å›é‚£ä¸ªç›¸åŒçš„

```js
let s = Symbol.for("shared")
let t = Symbol.for("shared")
s === t  // true
s.toString() // "Symbol(shared)"
Symbol.keyFor(t) // shared
```



## 5ã€å…¨å±€å¯¹è±¡ 

å…¨å±€å¯¹è±¡çš„å±æ€§æ˜¯å…¨å±€æ€§å®šä¹‰çš„æ ‡è¯†ç¬¦ï¼Œåœ¨jsç¨‹åºçš„ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ã€‚

JSè§£é‡Šå™¨å¯åŠ¨åï¼ˆæˆ–è€…æ¯æ¬¡æµè§ˆå™¨åŠ è½½æ–°é¡µé¢çš„æ—¶å€™ï¼‰ï¼Œå°±ä¼šåˆ›å»ºæ–°çš„å…¨å±€å¯¹è±¡å¹¶ä¸ºå…¶æ·»åŠ ä¸€äº›åˆå§‹çš„å±æ€§ã€‚

nodeä¸­ï¼Œglobalå±æ€§å°±æ˜¯å…¨å±€å¯¹è±¡ä»–è‡ªå·±

æµè§ˆå™¨ä¸­ï¼Œwindowå±æ€§å¯ä»¥åº”ç”¨å…¨å±€å¯¹è±¡ã€‚

æ³¨æ„ï¼šå·¥ä½œçº¿ç¨‹çš„å…¨å±€å¯¹è±¡ä¸æ˜¯å“¦ï¼Œä»–ä»¬æ˜¯selfï¼Œæ¥å¼•ç”¨ä»–ä»¬çš„å…¨å±€å¯¹è±¡ã€‚

è¿˜æœ‰ï¼šes2020åï¼Œæµè§ˆå™¨å’Œnodeï¼Œéƒ½å¯ä»¥ä½¿ç”¨globalThisï¼Œä½œä¸ºå¼•ç”¨å…¨å±€å¯¹è±¡çš„æ ‡å‡†æ–¹å¼

![image-20230325232527293](/Users/chenyubo/Library/Application Support/typora-user-images/image-20230325232527293.png)



## 6ã€è½¬æ¢

é¿å…éšå¼è½¬æ¢ã€‚



## 7ã€å˜é‡å£°æ˜å’Œèµ‹å€¼

ä½¿ç”¨es6ä¹‹åçš„ letã€const



## 8ã€è§£æ„èµ‹å€¼

```js
let [x, y] = [1, 2]

[x, y] = [x + 1, y + 1]

// ==================
let [x, y] = [1] // x == 1, y == undefined
[x, y] = [1, ,2 ,3] // x == 1, y == 2
[,x,,y] = [1,2,3,4] // x == 2, y == 4, 

// ==================
let [x, ...y] = [1,2,3,4] // y == [2,3,4]
let [a, [b, c]] = [1, [2, 2.5,], 3] // a == 1, b == 2, c == 2.5
let [first, ...rest] = "Hello" // first="H" rest="["e", "l", "l", "o"]"

// ==================
let transparent = {r: 0.0, g: 0.0, b:0.0, a:1.0}
let {r, g, b} = transparent // r == 0.0 g == 0.0 b == 0.0
const {sin, cos, tan} = Math

const {cos: cosine, tan: tangent} = Math

```

è§£æ„èµ‹å€¼ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¦‚æœå¤æ‚è§£æ„ï¼Œè¿˜ä¸å¦‚ç”¨ä¼ ç»Ÿçš„æ–¹å¼

```js
let points = {p1: [1,2], p2: [3,4]}
let {p1: [x1, y1], p2: [x2, y2]} = points

// ===========
let x1 = points.p1[0] // æ›´åŠ ç®€å•æ˜“æ‡‚
```





# 4 è¡¨è¾¾å¼ä¸æ“ä½œç¬¦

## 1ã€æ¡ä»¶å¼è®¿é—®è¡¨è¾¾å¼  ?. å’Œ ?.[]

?. å’Œ ?.[] å°±æ˜¯é˜²æ­¢ nullï¼Œå’Œundefinedï¼Œä¸ä¼šæŠ¥é”™ï¼Œä¼šè¿”å›undefined

```js
let a = {b: null}
a.b?.c.d // => undefined

let a = {b: {}};
a.b?.c?.d // => undefined


```

å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸é‡åˆ°è¿™ç§åœºæ™¯ï¼Œå°±å¯ä»¥æ”¹æˆ `?.`

 ```js
if(res.data && res.data.result) {
   ...
}
   
// ======
if(res?.data?.result){
  ...
}
 ```



 æ¡ä»¶å¼è°ƒç”¨ ?.()

```js
function square(x, log) {
  log?.(x);
  return x * x;
}
```



## 2ã€=å’Œ==å’Œ===

å®è·µä¸­å°±æ˜¯è¦ä¸¥æ ¼ç”¨ === å’Œ !==



## 3ã€inæ“ä½œç¬¦å·

åˆ¤æ–­å·¦ä¾§çš„å€¼æ˜¯ä¸æ˜¯å³ä¾§å¯¹è±¡çš„å±æ€§

```js
let point = {x: 1, y: 1}
"x" in point // => true
"z" in point // => false
"toString" in point // => true
```

æ³¨æ„ï¼Œinæ“ä½œç¬¦ï¼Œä¼šå¾€åŸå‹é“¾å¾€ä¸Šæ‰¾



## 4ã€instanceæ“ä½œç¬¦

o instance f 

jsä¼šæ±‚å€¼f.prototype ç„¶ååœ¨oçš„åŸå‹é“¾æŸ¥æ‰¾è¿™ä¸ªå€¼ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™oæ˜¯fçš„å®åŠ›ï¼Œè¿”å›true



## 5ã€??

```js
// å¦‚æœmaxWidth æœ‰å®šä¹‰ï¼Œå°±ç”¨å®ƒï¼Œå¦åˆ™ ... å¦åˆ™ ...
let max = maxWidth ?? perferences.maxWidth ?? 500


let options = {timeout:0, title:"", verbose:false, n:null}

options.timeout ?? 1000 // 0 
options.title ?? "xxx" // ""
options.n ?? 10 // 10 
```



# 5 è¯­å¥

## 1ã€for of

es6æ–°å¢äº†ä¸€ä¸ªfor ofä¸“é—¨ç”¨æ¥è¿­ä»£å¯è¿­ä»£å¯¹è±¡ã€‚

å¸¸è§çš„å¯è¿­ä»£å¯¹è±¡æœ‰ï¼Œæ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼Œé›†åˆã€æ˜ å°„ã€‚è¿˜æœ‰Object.keys, Object.values

```js
for(let k of Object.keys(o))
  
for(let [k, v] of Object.entries(o))

let wordSet = new Set(['a', 'b'])
for(let word of wordSet) {
  ...
}

let m = new Mao([[1, "one"]])
for(let [key, value] of m) {
  // ...
}
```

å°‘ç”¨for in



## 2ã€for await ä¸å¼‚æ­¥è¿­ä»£

```js
async function printStream(stream) {
  for await (let chunk of stream) {
    ...
  }
}
```



## 3ã€throw

å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¤§å®¶å¾ˆå°‘å†™throwï¼Œ

```js
function p(x) {
  if(x < 0) throw new Error("xxx")
  ...
}
```



# 6 å¯¹è±¡

## 1ã€Object.create()

```js
let o1 = Object,create({x:1, y:2}) // o1 ç»§æ‰¿å±æ€§ x å’Œ y
o1.x + o1.y

let o2 = Object.create(null) // o2 ä¸ç»§æ‰¿ä»»ä½•å±æ€§å’Œæ–¹æ³•
```

## 2ã€å±æ€§

```js
// 1 æµ‹è¯•å±æ€§æ˜¯å¦åœ¨ è¿™ä¸ªå¯¹è±¡
o.hasOwnProperty("x") // è‡ªæœ‰å±æ€§
â€œtoStringâ€ in o // ç»§æ‰¿çš„ä¹Ÿä¼šæ‰¾åˆ°


// 2 æšä¸¾å±æ€§
Object.keys() // è‡ªæœ‰å±æ€§ï¼Œä¸åŒ…å«ä¸å¯æšä¸¾ã€ç»§æ‰¿ã€å’Œç¬¦å·
Object.getOwnPropertyNames() // è‡ªç”±å±æ€§ï¼Œ+ ä¸å¯æšä¸¾çš„
Object.getPropertySymbols() // è¿”å›ç¬¦å·
Refect.ownKeys() //æ‰€æœ‰
```

## 3ã€æ‰©å±•å¯¹è±¡ Object.assign

```js
Object.assign(o, defaults) // ç”¨defaultsè¦†ç›–oçš„æ‰€æœ‰å±æ€§

Object.assign({}, defaults, o) // æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œé»˜è®¤å¤åˆ¶åˆ°å¯¹è±¡ä¸­ï¼Œåœ¨ç”¨oçš„è¦†ç›–é»˜è®¤
```



# 7 æ•°ç»„





